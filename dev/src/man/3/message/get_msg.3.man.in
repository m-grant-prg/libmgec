NAME
get_msg - Get a message from the buffer.
SYNOPSIS
#include <mgemessage.h>

struct mgemessage *get_msg(struct mgebuffer *buf,
		struct mgemessage *msg);

DESCRIPTION
Data from the buffer is extracted to the message struct. This could be a
complete message, (terminated with the mgemessage.terminator), or a partial
message. If it is an incomplete message then data will be appended to the
partial message next time this function is invoked, repeating until a complete
message is held in the struct.
If a complete message exists in the buffer, get_msg() sets the complete field.
get_msg() only updates the message and complete fields (and indexing fields), to
fully populate the other fields in the message struct use deconstruct_msg().
At the end of processing the processed part of the buffer is removed by
invoking trim_buf().

mge_errno is set as required.
PARAMETERS
buf - a pointer to the mgebuffer struct buffer to use as the source.
.br
msg - a pointer to the mgemessage struct to populate.

RETURN VALUE
Return value is a pointer to the not fully populated mgemessage struct or NULL
on error.

ERRORS
mge_errno is set as required.

AUTHOR
Written by Mark Grant.
REPORTING BUGS
Report bugs to <m.grant.prg@gmail.com>
COPYRIGHT
Copyright 2015-2018 Mark Grant.
.br
License GPLv3+: GNU GPL version 3 or later
.br
<http://gnu.org/licenses/gpl.html>.
.br
This is free software: you are free to change and redistribute it.
.br
There is NO WARRANTY, to the extent permitted by law.
SEE ALSO
clear_msg(3) concat_buf(3) deconstruct_msg(3) print_buf(3) print_msg(3)
pull_msg(3) trim_buf(3) mge_strerror(3)
