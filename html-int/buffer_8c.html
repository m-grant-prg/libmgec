<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MGE General C Library - Full Internal Documentation: src/prg/c/src/libmgec/buf-msg/buffer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MGE General C Library - Full Internal Documentation
   &#160;<span id="projectnumber">v1.6.5+rc1</span>
   </div>
   <div id="projectbrief">Library of general C functions.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('buffer_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">buffer.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="buf-msg_2internal_8h_source.html">internal.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="mge-errno_8h_source.html">mge-errno.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mgebuffer_8h_source.html">mgebuffer.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for buffer.c:</div>
<div class="dyncontent">
<div class="center"><img src="buffer_8c__incl.png" border="0" usemap="#src_2prg_2c_2src_2libmgec_2buf-msg_2buffer_8c" alt=""/></div>
<map name="src_2prg_2c_2src_2libmgec_2buf-msg_2buffer_8c" id="src_2prg_2c_2src_2libmgec_2buf-msg_2buffer_8c">
<area shape="rect" title=" " alt="" coords="277,5,433,47"/>
<area shape="rect" title=" " alt="" coords="5,95,73,121"/>
<area shape="rect" title=" " alt="" coords="98,95,165,121"/>
<area shape="rect" title=" " alt="" coords="189,95,260,121"/>
<area shape="rect" title=" " alt="" coords="284,95,355,121"/>
<area shape="rect" title=" " alt="" coords="434,169,530,196"/>
<area shape="rect" href="buf-msg_2internal_8h.html" title=" " alt="" coords="681,95,765,121"/>
<area shape="rect" href="mge-errno_8h.html" title=" " alt="" coords="431,95,533,121"/>
<area shape="rect" href="mgebuffer_8h.html" title=" " alt="" coords="557,95,657,121"/>
<area shape="rect" href="portability_8h.html" title=" " alt="" coords="558,169,657,196"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a84f0acd02cc1377f3fa2e3ac9c3b9ec2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a84f0acd02cc1377f3fa2e3ac9c3b9ec2">concat_buf</a> (const char *s_buf, const size_t s_buf_os, struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *m_buf)</td></tr>
<tr class="memdesc:a84f0acd02cc1377f3fa2e3ac9c3b9ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Concatenate the used portion of a flat buffer into a buffer object.  <a href="buffer_8c.html#a84f0acd02cc1377f3fa2e3ac9c3b9ec2">More...</a><br /></td></tr>
<tr class="separator:a84f0acd02cc1377f3fa2e3ac9c3b9ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39df69216e9e8bf96ab185e3b2d85090"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a39df69216e9e8bf96ab185e3b2d85090">trim_buf</a> (struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *m_buf)</td></tr>
<tr class="memdesc:a39df69216e9e8bf96ab185e3b2d85090"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove processed data from a buffer object if deemed necessary.  <a href="buffer_8c.html#a39df69216e9e8bf96ab185e3b2d85090">More...</a><br /></td></tr>
<tr class="separator:a39df69216e9e8bf96ab185e3b2d85090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63abbd8a31e859f4879de5205d21fce1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a63abbd8a31e859f4879de5205d21fce1">print_buf</a> (struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *m_buf)</td></tr>
<tr class="memdesc:a63abbd8a31e859f4879de5205d21fce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a buffer object to stdout, (for debugging).  <a href="buffer_8c.html#a63abbd8a31e859f4879de5205d21fce1">More...</a><br /></td></tr>
<tr class="separator:a63abbd8a31e859f4879de5205d21fce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a595a873ce81c844e14591375c8210211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer_8c.html#a595a873ce81c844e14591375c8210211">print_def_buf_values</a> (void)</td></tr>
<tr class="memdesc:a595a873ce81c844e14591375c8210211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the key default values to stdout, (for debugging).  <a href="buffer_8c.html#a595a873ce81c844e14591375c8210211">More...</a><br /></td></tr>
<tr class="separator:a595a873ce81c844e14591375c8210211"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Buffer processing functions.</p>
<p>All buffer manipulation support functions.</p>
<dl class="section author"><dt>Author</dt><dd>Copyright (C) 2017-2022 Mark Grant</dd></dl>
<p>Released under the GPLv3 only.<br  />
SPDX-License-Identifier: GPL-3.0-only</p>
<dl class="section version"><dt>Version</dt><dd><em>v1.0.14 ==== 29/05/2022</em> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a84f0acd02cc1377f3fa2e3ac9c3b9ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84f0acd02cc1377f3fa2e3ac9c3b9ec2">&#9670;&nbsp;</a></span>concat_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmgebuffer.html">mgebuffer</a>* concat_buf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>s_buf_os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *&#160;</td>
          <td class="paramname"><em>m_buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Concatenate the used portion of a flat buffer into a buffer object. </p>
<p>On failure NULL is returned, the function arguments are unchanged and mge_errno will be set. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_buf</td><td>Source buffer. </td></tr>
    <tr><td class="paramname">s_buf_os</td><td>Offset into source buffer ie extent of used portion. </td></tr>
    <tr><td class="paramname">m_buf</td><td>The buffer object to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The processed buffer object. NULL on error. </dd></dl>

</div>
</div>
<a id="a63abbd8a31e859f4879de5205d21fce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63abbd8a31e859f4879de5205d21fce1">&#9670;&nbsp;</a></span>print_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_buf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *&#160;</td>
          <td class="paramname"><em>m_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print a buffer object to stdout, (for debugging). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m_buf</td><td>Buffer to print. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a595a873ce81c844e14591375c8210211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a595a873ce81c844e14591375c8210211">&#9670;&nbsp;</a></span>print_def_buf_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_def_buf_values </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the key default values to stdout, (for debugging). </p>

</div>
</div>
<a id="a39df69216e9e8bf96ab185e3b2d85090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39df69216e9e8bf96ab185e3b2d85090">&#9670;&nbsp;</a></span>trim_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmgebuffer.html">mgebuffer</a>* trim_buf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmgebuffer.html">mgebuffer</a> *&#160;</td>
          <td class="paramname"><em>m_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove processed data from a buffer object if deemed necessary. </p>
<p>Re-sizing the buffer every time this function is called would not be efficient. So, the function first tests whether the buffer has a defined multiple of the default buffer size (BUF_UNUSED_DEF_SIZE_MULT) free, and if so shrinks the buffer and relocates valid data to the start of the buffer. If that test does not result in action, the second test determines if the percentage of unreachable portion of the buffer to the size of the buffer exceeds a defined value (BUF_MAX_UNREACH_PERCENT), and if so, it relocates data to the start of the buffer. On failure NULL is returned, the function argument is unchanged and mge_errno will be set. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m_buf</td><td>Pointer to the buffer object to process. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the processed buffer object or NULL on error. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a1986ada3285f0a0ebcb94921d9f60ef.html">prg</a></li><li class="navelem"><a class="el" href="dir_088b4e4436e06887f3fa9c5a3af9d85c.html">c</a></li><li class="navelem"><a class="el" href="dir_29196a9fd547b021dd2fe1aed517e98d.html">src</a></li><li class="navelem"><a class="el" href="dir_52a6e28feaf66fe27205aa2ea28c0372.html">libmgec</a></li><li class="navelem"><a class="el" href="dir_d78e62a2cbd421971c1fc219a63b7a50.html">buf-msg</a></li><li class="navelem"><a class="el" href="buffer_8c.html">buffer.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
